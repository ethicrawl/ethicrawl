<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>ethicrawl.logger.logger API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ethicrawl.logger.logger</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ethicrawl.logger.logger.Logger"><code class="flex name class">
<span>class <span class="ident">Logger</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Logger:
    &#34;&#34;&#34;Factory class for creating and managing loggers throughout Ethicrawl.

    This class provides a centralized way to create and configure loggers based on
    the application&#39;s configuration settings. It supports:

    - Resource-specific loggers with hierarchical naming
    - Component-specific log levels
    - Console output with optional color formatting
    - File output with configurable paths
    - Initialization management to prevent duplicate configuration

    The Logger class is designed as a static utility class rather than being instantiated.
    All methods are static and operate on the global logging configuration.

    Example:
        &gt;&gt;&gt; from ethicrawl.logger import Logger
        &gt;&gt;&gt; from ethicrawl.core import Resource, Url
        &gt;&gt;&gt; # Setup logging (happens automatically when first logger is created)
        &gt;&gt;&gt; Logger.setup_logging()
        &gt;&gt;&gt; # Get a logger for a specific resource
        &gt;&gt;&gt; resource = Resource(Url(&#34;https://example.com&#34;))
        &gt;&gt;&gt; logger = Logger.logger(resource, &#34;http&#34;)
        &gt;&gt;&gt; logger.info(&#34;Making request to %s&#34;, resource.url)
    &#34;&#34;&#34;

    # Keep track of whether logging has been initialized
    _initialized = False

    # Cache for handlers to avoid duplicate creation
    _console_handler = None
    _file_handler = None

    @staticmethod
    def setup_logging() -&gt; None:
        &#34;&#34;&#34;Configure the logging system based on current configuration.

        This method reads the logger configuration from the global Config singleton
        and sets up handlers, formatters, and log levels accordingly. It should be
        called once at application startup, but is also called automatically by
        logger() if needed.

        The method configures:
        - Root logger with WARNING level
        - Main application logger with configured level
        - Console output (if enabled)
        - File output (if enabled)
        - Component-specific log levels

        This method is idempotent - calling it multiple times has no effect
        after the initial setup.
        &#34;&#34;&#34;
        if Logger._initialized:
            return

        config = Config()
        log_config = config.logger

        # Configure root logger
        root_logger = getLogger()
        root_logger.setLevel(WARNING)  # Default level for non-app loggers

        # Remove existing handlers to avoid duplicates on re-initialization
        for handler in root_logger.handlers[:]:
            root_logger.removeHandler(handler)

        # Create formatters
        console_formatter: Formatter
        if log_config.use_colors:
            console_formatter = ColorFormatter(log_config.format)
        else:
            console_formatter = Formatter(log_config.format)

        file_formatter = Formatter(log_config.format)

        # Set up console logging if enabled
        if log_config.console_enabled:
            console = StreamHandler(stdout)
            console.setFormatter(console_formatter)
            root_logger.addHandler(console)
            Logger._console_handler = console

        # Set up file logging if enabled
        if log_config.file_enabled and log_config.file_path:
            # Ensure directory exists
            log_dir = path.dirname(log_config.file_path)
            if log_dir and not path.exists(log_dir):
                makedirs(log_dir)

            file_handler = FileHandler(log_config.file_path)
            file_handler.setFormatter(file_formatter)
            root_logger.addHandler(file_handler)
            Logger._file_handler = file_handler

        # Configure the main application logger
        app_logger = getLogger(__name__.split(&#34;.&#34;)[0])  # &#39;ethicrawl&#39;
        app_logger.setLevel(log_config.level)
        app_logger.propagate = True

        # Apply component-specific log levels
        for component, level in log_config.component_levels.items():
            component_logger = getLogger(f&#34;{__name__.split(&#39;.&#39;)[0]}.*.{component}&#34;)
            component_logger.setLevel(level)

        Logger._initialized = True

    @staticmethod
    def _clean_name(name: str) -&gt; str:
        &#34;&#34;&#34;Clean a string to make it suitable as a logger name.

        Removes or replaces characters that would be invalid in logger names,
        following Python&#39;s logging module conventions.

        Args:
            name: The string to clean

        Returns:
            A cleaned string suitable for use as a logger name
        &#34;&#34;&#34;
        # Replace invalid characters with underscores
        name = sub(r&#34;[^a-zA-Z0-9_\-\.]&#34;, &#34;_&#34;, name)
        # Replace consecutive dots with a single dot
        name = sub(r&#34;\.{2,}&#34;, &#34;.&#34;, name)
        # Replace consecutive underscores with a single underscore
        name = sub(r&#34;\_{2,}&#34;, &#34;_&#34;, name)
        # Remove leading and trailing dots
        name = sub(r&#34;^\.|\.$&#34;, &#34;&#34;, name)
        return name or &#34;unnamed&#34;

    @staticmethod
    def logger(resource: Resource, component: str | None = None) -&gt; LoggingLogger:
        &#34;&#34;&#34;Get a logger for the specified resource, optionally with a component name.

        Creates or retrieves a logger with a hierarchical name based on the resource URL
        and optional component. Automatically initializes logging if not already done.

        Args:
            resource: The resource to create a logger for
            component: Optional component name (e.g., &#34;robots&#34;, &#34;sitemaps&#34;)

        Returns:
            A logger instance configured according to application settings

        Example:
            &gt;&gt;&gt; from ethicrawl.core import Resource
            &gt;&gt;&gt; resource = Resource(&#34;https://example.com&#34;)
            &gt;&gt;&gt; logger = Logger.logger(resource, &#34;http&#34;)
            &gt;&gt;&gt; logger.debug(&#34;Processing %s&#34;, resource.url)
        &#34;&#34;&#34;
        if not Logger._initialized:
            Logger.setup_logging()

        prefix = __name__.split(&#34;.&#34;)[0]

        base = resource.url.base.replace(&#34;.&#34;, &#34;_&#34;)

        # Build the logger name
        if component:
            logger_name = f&#34;{prefix}.{base}.{component}&#34;
        else:
            logger_name = f&#34;{prefix}.{base}&#34;

        # Clean the name for logger compatibility
        logger_name = Logger._clean_name(logger_name)

        # Get or create the logger
        logger = getLogger(logger_name)

        # Apply component-specific log level if applicable
        config = Config()
        if component and component in config.logger.component_levels:
            logger.setLevel(config.logger.component_levels[component])

        return logger

    @staticmethod
    def reset() -&gt; None:
        &#34;&#34;&#34;Reset logging configuration to initial state.

        Removes all handlers and resets the initialization flag,
        allowing logging to be reconfigured. Primarily used for testing.

        Example:
            &gt;&gt;&gt; # In a test setup
            &gt;&gt;&gt; def setUp(self):
            &gt;&gt;&gt;     Logger.reset()  # Ensure clean logging state
        &#34;&#34;&#34;
        Logger._initialized = False
        Logger._console_handler = None
        Logger._file_handler = None

        # Reset the root logger
        root = getLogger()
        for handler in root.handlers[:]:
            root.removeHandler(handler)</code></pre>
</details>
<div class="desc"><p>Factory class for creating and managing loggers throughout Ethicrawl.</p>
<p>This class provides a centralized way to create and configure loggers based on
the application's configuration settings. It supports:</p>
<ul>
<li>Resource-specific loggers with hierarchical naming</li>
<li>Component-specific log levels</li>
<li>Console output with optional color formatting</li>
<li>File output with configurable paths</li>
<li>Initialization management to prevent duplicate configuration</li>
</ul>
<p>The Logger class is designed as a static utility class rather than being instantiated.
All methods are static and operate on the global logging configuration.</p>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from ethicrawl.logger import Logger
&gt;&gt;&gt; from ethicrawl.core import Resource, Url
&gt;&gt;&gt; # Setup logging (happens automatically when first logger is created)
&gt;&gt;&gt; Logger.setup_logging()
&gt;&gt;&gt; # Get a logger for a specific resource
&gt;&gt;&gt; resource = Resource(Url(&quot;https://example.com&quot;))
&gt;&gt;&gt; logger = Logger.logger(resource, &quot;http&quot;)
&gt;&gt;&gt; logger.info(&quot;Making request to %s&quot;, resource.url)
</code></pre></div>
<h3>Static methods</h3>
<dl>
<dt id="ethicrawl.logger.logger.Logger.logger"><code class="name flex">
<span>def <span class="ident">logger</span></span>(<span>resource: <a title="ethicrawl.core.resource.Resource" href="../core/resource.html#ethicrawl.core.resource.Resource">Resource</a>,<br>component: str | None = None) ‑> logging.Logger</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def logger(resource: Resource, component: str | None = None) -&gt; LoggingLogger:
    &#34;&#34;&#34;Get a logger for the specified resource, optionally with a component name.

    Creates or retrieves a logger with a hierarchical name based on the resource URL
    and optional component. Automatically initializes logging if not already done.

    Args:
        resource: The resource to create a logger for
        component: Optional component name (e.g., &#34;robots&#34;, &#34;sitemaps&#34;)

    Returns:
        A logger instance configured according to application settings

    Example:
        &gt;&gt;&gt; from ethicrawl.core import Resource
        &gt;&gt;&gt; resource = Resource(&#34;https://example.com&#34;)
        &gt;&gt;&gt; logger = Logger.logger(resource, &#34;http&#34;)
        &gt;&gt;&gt; logger.debug(&#34;Processing %s&#34;, resource.url)
    &#34;&#34;&#34;
    if not Logger._initialized:
        Logger.setup_logging()

    prefix = __name__.split(&#34;.&#34;)[0]

    base = resource.url.base.replace(&#34;.&#34;, &#34;_&#34;)

    # Build the logger name
    if component:
        logger_name = f&#34;{prefix}.{base}.{component}&#34;
    else:
        logger_name = f&#34;{prefix}.{base}&#34;

    # Clean the name for logger compatibility
    logger_name = Logger._clean_name(logger_name)

    # Get or create the logger
    logger = getLogger(logger_name)

    # Apply component-specific log level if applicable
    config = Config()
    if component and component in config.logger.component_levels:
        logger.setLevel(config.logger.component_levels[component])

    return logger</code></pre>
</details>
<div class="desc"><p>Get a logger for the specified resource, optionally with a component name.</p>
<p>Creates or retrieves a logger with a hierarchical name based on the resource URL
and optional component. Automatically initializes logging if not already done.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>resource</code></strong></dt>
<dd>The resource to create a logger for</dd>
<dt><strong><code>component</code></strong></dt>
<dd>Optional component name (e.g., "robots", "sitemaps")</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>A logger instance configured according to application settings</p>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from ethicrawl.core import Resource
&gt;&gt;&gt; resource = Resource(&quot;https://example.com&quot;)
&gt;&gt;&gt; logger = Logger.logger(resource, &quot;http&quot;)
&gt;&gt;&gt; logger.debug(&quot;Processing %s&quot;, resource.url)
</code></pre></div>
</dd>
<dt id="ethicrawl.logger.logger.Logger.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>) ‑> None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def reset() -&gt; None:
    &#34;&#34;&#34;Reset logging configuration to initial state.

    Removes all handlers and resets the initialization flag,
    allowing logging to be reconfigured. Primarily used for testing.

    Example:
        &gt;&gt;&gt; # In a test setup
        &gt;&gt;&gt; def setUp(self):
        &gt;&gt;&gt;     Logger.reset()  # Ensure clean logging state
    &#34;&#34;&#34;
    Logger._initialized = False
    Logger._console_handler = None
    Logger._file_handler = None

    # Reset the root logger
    root = getLogger()
    for handler in root.handlers[:]:
        root.removeHandler(handler)</code></pre>
</details>
<div class="desc"><p>Reset logging configuration to initial state.</p>
<p>Removes all handlers and resets the initialization flag,
allowing logging to be reconfigured. Primarily used for testing.</p>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; # In a test setup
&gt;&gt;&gt; def setUp(self):
&gt;&gt;&gt;     Logger.reset()  # Ensure clean logging state
</code></pre></div>
</dd>
<dt id="ethicrawl.logger.logger.Logger.setup_logging"><code class="name flex">
<span>def <span class="ident">setup_logging</span></span>(<span>) ‑> None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def setup_logging() -&gt; None:
    &#34;&#34;&#34;Configure the logging system based on current configuration.

    This method reads the logger configuration from the global Config singleton
    and sets up handlers, formatters, and log levels accordingly. It should be
    called once at application startup, but is also called automatically by
    logger() if needed.

    The method configures:
    - Root logger with WARNING level
    - Main application logger with configured level
    - Console output (if enabled)
    - File output (if enabled)
    - Component-specific log levels

    This method is idempotent - calling it multiple times has no effect
    after the initial setup.
    &#34;&#34;&#34;
    if Logger._initialized:
        return

    config = Config()
    log_config = config.logger

    # Configure root logger
    root_logger = getLogger()
    root_logger.setLevel(WARNING)  # Default level for non-app loggers

    # Remove existing handlers to avoid duplicates on re-initialization
    for handler in root_logger.handlers[:]:
        root_logger.removeHandler(handler)

    # Create formatters
    console_formatter: Formatter
    if log_config.use_colors:
        console_formatter = ColorFormatter(log_config.format)
    else:
        console_formatter = Formatter(log_config.format)

    file_formatter = Formatter(log_config.format)

    # Set up console logging if enabled
    if log_config.console_enabled:
        console = StreamHandler(stdout)
        console.setFormatter(console_formatter)
        root_logger.addHandler(console)
        Logger._console_handler = console

    # Set up file logging if enabled
    if log_config.file_enabled and log_config.file_path:
        # Ensure directory exists
        log_dir = path.dirname(log_config.file_path)
        if log_dir and not path.exists(log_dir):
            makedirs(log_dir)

        file_handler = FileHandler(log_config.file_path)
        file_handler.setFormatter(file_formatter)
        root_logger.addHandler(file_handler)
        Logger._file_handler = file_handler

    # Configure the main application logger
    app_logger = getLogger(__name__.split(&#34;.&#34;)[0])  # &#39;ethicrawl&#39;
    app_logger.setLevel(log_config.level)
    app_logger.propagate = True

    # Apply component-specific log levels
    for component, level in log_config.component_levels.items():
        component_logger = getLogger(f&#34;{__name__.split(&#39;.&#39;)[0]}.*.{component}&#34;)
        component_logger.setLevel(level)

    Logger._initialized = True</code></pre>
</details>
<div class="desc"><p>Configure the logging system based on current configuration.</p>
<p>This method reads the logger configuration from the global Config singleton
and sets up handlers, formatters, and log levels accordingly. It should be
called once at application startup, but is also called automatically by
logger() if needed.</p>
<p>The method configures:
- Root logger with WARNING level
- Main application logger with configured level
- Console output (if enabled)
- File output (if enabled)
- Component-specific log levels</p>
<p>This method is idempotent - calling it multiple times has no effect
after the initial setup.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ethicrawl.logger" href="index.html">ethicrawl.logger</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ethicrawl.logger.logger.Logger" href="#ethicrawl.logger.logger.Logger">Logger</a></code></h4>
<ul class="">
<li><code><a title="ethicrawl.logger.logger.Logger.logger" href="#ethicrawl.logger.logger.Logger.logger">logger</a></code></li>
<li><code><a title="ethicrawl.logger.logger.Logger.reset" href="#ethicrawl.logger.logger.Logger.reset">reset</a></code></li>
<li><code><a title="ethicrawl.logger.logger.Logger.setup_logging" href="#ethicrawl.logger.logger.Logger.setup_logging">setup_logging</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
