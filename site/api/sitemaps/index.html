
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Ethical web crawling library for Python">
      
      
        <meta name="author" content="Ethicrawl Team">
      
      
      
        <link rel="prev" href="../robots/">
      
      
        <link rel="next" href="../config/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Sitemaps - Ethicrawl</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sitemaps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ethicrawl" class="md-header__button md-logo" aria-label="Ethicrawl" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ethicrawl
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sitemaps
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ethicrawl/ethicrawl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ethicrawl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ethicrawl" class="md-nav__button md-logo" aria-label="Ethicrawl" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ethicrawl
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ethicrawl/ethicrawl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ethicrawl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/core-concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../robots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Robots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Sitemaps
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Sitemaps
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps" class="md-nav__link">
    <span class="md-ellipsis">
      sitemaps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexEntry" class="md-nav__link">
    <span class="md-ellipsis">
      IndexEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument" class="md-nav__link">
    <span class="md-ellipsis">
      IndexDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IndexDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapEntry" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SitemapDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SitemapParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser--parse-from-a-single-sitemap-url" class="md-nav__link">
    <span class="md-ellipsis">
      Parse from a single sitemap URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetEntry" class="md-nav__link">
    <span class="md-ellipsis">
      UrlsetEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument" class="md-nav__link">
    <span class="md-ellipsis">
      UrlsetDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UrlsetDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logger
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps" class="md-nav__link">
    <span class="md-ellipsis">
      sitemaps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexEntry" class="md-nav__link">
    <span class="md-ellipsis">
      IndexEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument" class="md-nav__link">
    <span class="md-ellipsis">
      IndexDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IndexDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.IndexDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapEntry" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SitemapDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser" class="md-nav__link">
    <span class="md-ellipsis">
      SitemapParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SitemapParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser--parse-from-a-single-sitemap-url" class="md-nav__link">
    <span class="md-ellipsis">
      Parse from a single sitemap URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.SitemapParser.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetEntry" class="md-nav__link">
    <span class="md-ellipsis">
      UrlsetEntry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument" class="md-nav__link">
    <span class="md-ellipsis">
      UrlsetDocument
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UrlsetDocument">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethicrawl.sitemaps.UrlsetDocument.entries" class="md-nav__link">
    <span class="md-ellipsis">
      entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="sitemaps">Sitemaps</h1>


<div class="doc doc-object doc-module">



<a id="ethicrawl.sitemaps"></a>
    <div class="doc doc-contents first">

        <p>XML sitemap parsing and traversal for discovering website structure.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.IndexEntry" class="doc doc-heading">
            <code>IndexEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SitemapEntry


  
      dataclass
   (ethicrawl.sitemaps.sitemap_entry.SitemapEntry)" href="#ethicrawl.sitemaps.SitemapEntry">SitemapEntry</a></code></p>


        <p>Represents an entry in a sitemap index file.</p>
<p>IndexEntry specializes SitemapEntry for use in sitemap index files.
Sitemap indexes are XML files that contain references to other sitemap
files, allowing websites to organize their sitemaps hierarchically.</p>
<p>IndexEntry maintains the same attributes as SitemapEntry (url and lastmod)
but provides specialized string representation appropriate for index entries.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.IndexEntry.url">url</span></code></td>
            <td>
                  <code><span title="ethicrawl.core.url.Url">Url</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL of the sitemap file (inherited from Resource)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.IndexEntry.lastmod">lastmod</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last modification date of the sitemap (inherited from SitemapEntry)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.core import Url
from ethicrawl.sitemaps import IndexEntry
index = IndexEntry(
...     Url("https://example.com/sitemap-products.xml"),
...     lastmod="2023-06-15T14:30:00Z"
... )
str(index)
'https://example.com/sitemap-products.xml (last modified: 2023-06-15T14:30:00Z)'
repr(index)
"SitemapIndexEntry(url='https://example.com/sitemap-products.xml', lastmod='2023-06-15T14:30:00Z')"</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/index_entry.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">IndexEntry</span><span class="p">(</span><span class="n">SitemapEntry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an entry in a sitemap index file.</span>

<span class="sd">    IndexEntry specializes SitemapEntry for use in sitemap index files.</span>
<span class="sd">    Sitemap indexes are XML files that contain references to other sitemap</span>
<span class="sd">    files, allowing websites to organize their sitemaps hierarchically.</span>

<span class="sd">    IndexEntry maintains the same attributes as SitemapEntry (url and lastmod)</span>
<span class="sd">    but provides specialized string representation appropriate for index entries.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url: URL of the sitemap file (inherited from Resource)</span>
<span class="sd">        lastmod: Last modification date of the sitemap (inherited from SitemapEntry)</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Url</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import IndexEntry</span>
<span class="sd">        &gt;&gt;&gt; index = IndexEntry(</span>
<span class="sd">        ...     Url(&quot;https://example.com/sitemap-products.xml&quot;),</span>
<span class="sd">        ...     lastmod=&quot;2023-06-15T14:30:00Z&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; str(index)</span>
<span class="sd">        &#39;https://example.com/sitemap-products.xml (last modified: 2023-06-15T14:30:00Z)&#39;</span>
<span class="sd">        &gt;&gt;&gt; repr(index)</span>
<span class="sd">        &quot;SitemapIndexEntry(url=&#39;https://example.com/sitemap-products.xml&#39;, lastmod=&#39;2023-06-15T14:30:00Z&#39;)&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detailed representation for debugging.</span>

<span class="sd">        Returns:</span>
<span class="sd">            String representation showing class name and field values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;SitemapIndexEntry(url=&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;, lastmod=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.IndexDocument" class="doc doc-heading">
            <code>IndexDocument</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SitemapDocument (ethicrawl.sitemaps.sitemap_document.SitemapDocument)" href="#ethicrawl.sitemaps.SitemapDocument">SitemapDocument</a></code></p>


        <p>Specialized parser for sitemap index documents.</p>
<p>This class extends the SitemapDocument class to handle sitemap indexes,
which are XML documents containing references to other sitemap files.
It validates that the document is a proper sitemap index and extracts
all sitemap references as IndexEntry objects.</p>
<p>IndexDocument enforces type safety for its entries collection, ensuring
that only IndexEntry objects can be added.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="entries: ResourceList

  
      property
      writable
   (ethicrawl.sitemaps.IndexDocument.entries)" href="#ethicrawl.sitemaps.IndexDocument.entries">entries</a></code></td>
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList of IndexEntry objects representing sitemap references</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.context import Context
from ethicrawl.core import Resource
from ethicrawl.sitemaps import IndexDocument
context = Context(Resource("https://example.com"))
sitemap_xml = '''&lt;?xml version="1.0" encoding="UTF-8"?&gt;
... <sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
...   <sitemap>
...     <loc>https://example.com/sitemap1.xml</loc>
...     <lastmod>2023-06-15T14:30:00Z</lastmod>
...   </sitemap>
... </sitemapindex>'''
index = IndexDocument(context, sitemap_xml)
len(index.entries)
1
str(index.entries[0])
'https://example.com/sitemap1.xml (last modified: 2023-06-15T14:30:00Z)'</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/index_document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">IndexDocument</span><span class="p">(</span><span class="n">SitemapDocument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specialized parser for sitemap index documents.</span>

<span class="sd">    This class extends the SitemapDocument class to handle sitemap indexes,</span>
<span class="sd">    which are XML documents containing references to other sitemap files.</span>
<span class="sd">    It validates that the document is a proper sitemap index and extracts</span>
<span class="sd">    all sitemap references as IndexEntry objects.</span>

<span class="sd">    IndexDocument enforces type safety for its entries collection, ensuring</span>
<span class="sd">    that only IndexEntry objects can be added.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        entries: ResourceList of IndexEntry objects representing sitemap references</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.context import Context</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Resource</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import IndexDocument</span>
<span class="sd">        &gt;&gt;&gt; context = Context(Resource(&quot;https://example.com&quot;))</span>
<span class="sd">        &gt;&gt;&gt; sitemap_xml = &#39;&#39;&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="sd">        ... &lt;sitemapindex xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;</span>
<span class="sd">        ...   &lt;sitemap&gt;</span>
<span class="sd">        ...     &lt;loc&gt;https://example.com/sitemap1.xml&lt;/loc&gt;</span>
<span class="sd">        ...     &lt;lastmod&gt;2023-06-15T14:30:00Z&lt;/lastmod&gt;</span>
<span class="sd">        ...   &lt;/sitemap&gt;</span>
<span class="sd">        ... &lt;/sitemapindex&gt;&#39;&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; index = IndexDocument(context, sitemap_xml)</span>
<span class="sd">        &gt;&gt;&gt; len(index.entries)</span>
<span class="sd">        1</span>
<span class="sd">        &gt;&gt;&gt; str(index.entries[0])</span>
<span class="sd">        &#39;https://example.com/sitemap1.xml (last modified: 2023-06-15T14:30:00Z)&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a sitemap index document parser.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: Context for logging and resource resolution</span>
<span class="sd">            document: Optional XML sitemap index content to parse</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the document is not a valid sitemap index</span>
<span class="sd">            SitemapError: If the document cannot be parsed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating IndexDocument instance&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">document</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_localname</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">QName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">localname</span>
            <span class="k">if</span> <span class="n">_localname</span> <span class="o">!=</span> <span class="n">SITEMAPINDEX</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a root </span><span class="si">{</span><span class="n">SITEMAPINDEX</span><span class="si">}</span><span class="s2"> got </span><span class="si">{</span><span class="n">_localname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_index_sitemap</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Parsed sitemap index with </span><span class="si">%d</span><span class="s2"> entries&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_index_sitemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse sitemap references from a sitemap index.</span>

<span class="sd">        Extracts all &lt;sitemap&gt; elements and their &lt;loc&gt; and &lt;lastmod&gt;</span>
<span class="sd">        children, creating IndexEntry objects for each valid reference.</span>

<span class="sd">        Args:</span>
<span class="sd">            document: XML document string to parse</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList containing IndexEntry objects for each sitemap reference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sitemaps</span><span class="p">:</span> <span class="n">ResourceList</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">()</span>

        <span class="n">nsmap</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SITEMAP_NS</span><span class="p">}</span>
        <span class="n">_root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>

        <span class="c1"># Find all sitemap elements</span>
        <span class="n">sitemap_elements</span> <span class="o">=</span> <span class="n">_root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;.//sitemap&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Found </span><span class="si">%d</span><span class="s2"> sitemap references in index&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sitemap_elements</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">sitemap_elem</span> <span class="ow">in</span> <span class="n">sitemap_elements</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Get the required loc element</span>
                <span class="n">loc_elem</span> <span class="o">=</span> <span class="n">sitemap_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">loc_elem</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">loc_elem</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># Get optional lastmod element</span>
                <span class="n">lastmod_elem</span> <span class="o">=</span> <span class="n">sitemap_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;lastmod&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>

                <span class="c1"># Create IndexEntry object (only loc and lastmod)</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">IndexEntry</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">Url</span><span class="p">(</span><span class="n">loc_elem</span><span class="o">.</span><span class="n">text</span><span class="p">),</span>
                    <span class="n">lastmod</span><span class="o">=</span><span class="n">lastmod_elem</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">lastmod_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">sitemaps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error parsing sitemap reference: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sitemaps</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the sitemaps in this index.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList of IndexEntry objects representing sitemap references</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span>

    <span class="nd">@entries</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="n">ResourceList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the sitemaps in this index.</span>

<span class="sd">        Args:</span>
<span class="sd">            entries: List of sitemap references as IndexEntry objects</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If entries is not a ResourceList or contains non-IndexEntry objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">ResourceList</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a ResourceList, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate all items are of correct type</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">IndexEntry</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected IndexEntry, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">%d</span><span class="s2"> entries in sitemap index&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="n">entries</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.IndexDocument.type" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the type of sitemap document.</p>
<p>Determines the type based on the root element's local name.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String indicating the sitemap type:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'sitemapindex': A sitemap index containing references to other sitemaps</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'urlset': A sitemap containing page URLs</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'unsupported': Any other type of document</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.error.SitemapError">SitemapError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no document has been loaded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.IndexDocument.entries" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entries</span><span class="p">:</span> <span class="n">ResourceList</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the sitemaps in this index.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList of IndexEntry objects representing sitemap references</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.SitemapEntry" class="doc doc-heading">
            <code>SitemapEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ethicrawl.core.resource.Resource">Resource</span></code></p>


        <p>Base class for entries found in XML sitemaps.</p>
<p>SitemapEntry extends Resource to represent entries from XML sitemaps with
their additional metadata. It maintains the URL identity pattern while
adding sitemap-specific attributes like the last modification date.</p>
<p>This class handles validation of W3C datetime formats and provides
appropriate string representation of sitemap entries.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.SitemapEntry.url">url</span></code></td>
            <td>
                  <code><span title="ethicrawl.core.url.Url">Url</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL of the sitemap entry (inherited from Resource)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.SitemapEntry.lastmod">lastmod</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last modification date string in W3C format (optional)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.core import Url
from ethicrawl.sitemaps import SitemapEntry
entry = SitemapEntry(
...     Url("https://example.com/page1"),
...     lastmod="2023-06-15T14:30:00Z"
... )
str(entry)
'https://example.com/page1 (last modified: 2023-06-15T14:30:00Z)'</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/sitemap_entry.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SitemapEntry</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for entries found in XML sitemaps.</span>

<span class="sd">    SitemapEntry extends Resource to represent entries from XML sitemaps with</span>
<span class="sd">    their additional metadata. It maintains the URL identity pattern while</span>
<span class="sd">    adding sitemap-specific attributes like the last modification date.</span>

<span class="sd">    This class handles validation of W3C datetime formats and provides</span>
<span class="sd">    appropriate string representation of sitemap entries.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url: URL of the sitemap entry (inherited from Resource)</span>
<span class="sd">        lastmod: Last modification date string in W3C format (optional)</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Url</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import SitemapEntry</span>
<span class="sd">        &gt;&gt;&gt; entry = SitemapEntry(</span>
<span class="sd">        ...     Url(&quot;https://example.com/page1&quot;),</span>
<span class="sd">        ...     lastmod=&quot;2023-06-15T14:30:00Z&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; str(entry)</span>
<span class="sd">        &#39;https://example.com/page1 (last modified: 2023-06-15T14:30:00Z)&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">lastmod</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_lastmod</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate lastmod date format using standard datetime.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Date string in W3C format</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Validated date string</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If date format is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;expected lastmod to be str, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Strip whitespace</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># Try standard formats for W3C datetime</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DD</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ss</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ssZ</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S%z&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ss+hh:mm (no colon)</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S%:z&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ss+hh:mm (with colon)</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">Z&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ss.ssssssZ (with microseconds)</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># YYYY-MM-DDThh:mm:ss.ssssss (with microseconds, no Z)</span>
        <span class="p">]</span>

        <span class="c1"># Try each format</span>
        <span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="n">formats</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># If parse succeeds, the date is valid</span>
                <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">continue</span>

        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid lastmod date format: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate fields after initialization.</span>

<span class="sd">        Validates the lastmod date format if provided, ensuring it</span>
<span class="sd">        conforms to one of the accepted W3C datetime formats.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If lastmod format is invalid</span>
<span class="sd">            TypeError: If lastmod is not a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>  <span class="c1"># Call Resource.__post_init__ first</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_lastmod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Human-readable string representation of the sitemap entry.</span>

<span class="sd">        Returns:</span>
<span class="sd">            URL string with last modification date if available</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2"> (last modified: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.SitemapDocument" class="doc doc-heading">
            <code>SitemapDocument</code>


</h3>


    <div class="doc doc-contents ">


        <p>Parser and representation of XML sitemap documents.</p>
<p>This class handles the parsing, validation, and extraction of entries from
XML sitemap documents, supporting both sitemap index files and urlset files.
It implements security best practices for XML parsing to prevent common
vulnerabilities like XXE attacks.</p>
<p>SitemapDocument distinguishes between sitemap indexes (which contain references
to other sitemaps) and urlsets (which contain actual page URLs), extracting
the appropriate entries in each case.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.SitemapDocument.SITEMAP_NS">SITEMAP_NS</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The official sitemap namespace URI</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="entries: ResourceList

  
      property
   (ethicrawl.sitemaps.SitemapDocument.entries)" href="#ethicrawl.sitemaps.SitemapDocument.entries">entries</a></code></td>
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList containing the parsed sitemap entries</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="type: str

  
      property
   (ethicrawl.sitemaps.SitemapDocument.type)" href="#ethicrawl.sitemaps.SitemapDocument.type">type</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of sitemap (sitemapindex, urlset, or unsupported)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.context import Context
from ethicrawl.core import Resource
from ethicrawl.sitemaps import SitemapDocument
context = Context(Resource("https://example.com"))
sitemap_xml = '''&lt;?xml version="1.0" encoding="UTF-8"?&gt;
... <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
...   <url>
...     <loc>https://example.com/page1</loc>
...     <lastmod>2023-06-15T14:30:00Z</lastmod>
...   </url>
... </urlset>'''
sitemap = SitemapDocument(context, sitemap_xml)
sitemap.type
'urlset'
len(sitemap.entries)
1</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/sitemap_document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SitemapDocument</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parser and representation of XML sitemap documents.</span>

<span class="sd">    This class handles the parsing, validation, and extraction of entries from</span>
<span class="sd">    XML sitemap documents, supporting both sitemap index files and urlset files.</span>
<span class="sd">    It implements security best practices for XML parsing to prevent common</span>
<span class="sd">    vulnerabilities like XXE attacks.</span>

<span class="sd">    SitemapDocument distinguishes between sitemap indexes (which contain references</span>
<span class="sd">    to other sitemaps) and urlsets (which contain actual page URLs), extracting</span>
<span class="sd">    the appropriate entries in each case.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        SITEMAP_NS: The official sitemap namespace URI</span>
<span class="sd">        entries: ResourceList containing the parsed sitemap entries</span>
<span class="sd">        type: The type of sitemap (sitemapindex, urlset, or unsupported)</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.context import Context</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Resource</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import SitemapDocument</span>
<span class="sd">        &gt;&gt;&gt; context = Context(Resource(&quot;https://example.com&quot;))</span>
<span class="sd">        &gt;&gt;&gt; sitemap_xml = &#39;&#39;&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="sd">        ... &lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;</span>
<span class="sd">        ...   &lt;url&gt;</span>
<span class="sd">        ...     &lt;loc&gt;https://example.com/page1&lt;/loc&gt;</span>
<span class="sd">        ...     &lt;lastmod&gt;2023-06-15T14:30:00Z&lt;/lastmod&gt;</span>
<span class="sd">        ...   &lt;/url&gt;</span>
<span class="sd">        ... &lt;/urlset&gt;&#39;&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; sitemap = SitemapDocument(context, sitemap_xml)</span>
<span class="sd">        &gt;&gt;&gt; sitemap.type</span>
<span class="sd">        &#39;urlset&#39;</span>
<span class="sd">        &gt;&gt;&gt; len(sitemap.entries)</span>
<span class="sd">        1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SITEMAP_NS</span> <span class="o">=</span> <span class="s2">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a sitemap document parser with security protections.</span>

<span class="sd">        Sets up the XML parser with security features to prevent common</span>
<span class="sd">        XML vulnerabilities and optionally parses a provided document.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: Context for logging and resource resolution</span>
<span class="sd">            document: Optional XML sitemap content to parse immediately</span>

<span class="sd">        Raises:</span>
<span class="sd">            SitemapError: If the provided document cannot be parsed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">logger</span><span class="p">(</span><span class="s2">&quot;sitemap.document&quot;</span><span class="p">)</span>
        <span class="c1"># Add debug logging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating new SitemapDocument instance&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">:</span> <span class="n">ResourceList</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLParser</span><span class="p">(</span>
            <span class="n">resolve_entities</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Prevent XXE attacks</span>
            <span class="n">no_network</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Prevent external resource loading</span>
            <span class="n">dtd_validation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Don&#39;t validate DTDs</span>
            <span class="n">load_dtd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Don&#39;t load DTDs at all</span>
            <span class="n">huge_tree</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Prevent XML bomb attacks</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">document</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_escape_unescaped_ampersands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_document</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Escape unescaped ampersands in XML content.</span>

<span class="sd">        Args:</span>
<span class="sd">            xml_document: Raw XML string that may contain unescaped ampersands</span>

<span class="sd">        Returns:</span>
<span class="sd">            XML string with properly escaped ampersands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&amp;(?!(?:[a-zA-Z]+|#[0-9]+|#x[0-9a-fA-F]+);)&quot;</span>
        <span class="k">return</span> <span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">,</span> <span class="n">xml_document</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and parse a sitemap XML document.</span>

<span class="sd">        This method:</span>
<span class="sd">        1. Escapes unescaped ampersands in the document</span>
<span class="sd">        2. Parses the XML using the secure parser</span>
<span class="sd">        3. Validates that it uses the correct sitemap namespace</span>

<span class="sd">        Args:</span>
<span class="sd">            document: XML document string to parse</span>

<span class="sd">        Returns:</span>
<span class="sd">            The parsed XML element tree root</span>

<span class="sd">        Raises:</span>
<span class="sd">            SitemapError: If the document has invalid XML or incorrect namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">document</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_escape_unescaped_ampersands</span><span class="p">(</span>
            <span class="n">document</span>
        <span class="p">)</span>  <span class="c1"># TODO: might want to move this to the HttpClient</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_element</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_element</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">!=</span> <span class="n">SitemapDocument</span><span class="o">.</span><span class="n">SITEMAP_NS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;Required default namespace not found: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">SitemapDocument</span><span class="o">.</span><span class="n">SITEMAP_NS</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="n">SitemapError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Required default namespace not found: </span><span class="si">{</span><span class="n">SitemapDocument</span><span class="o">.</span><span class="n">SITEMAP_NS</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">_element</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid XML syntax: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">SitemapError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid XML syntax: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of entries extracted from the sitemap.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList containing SitemapEntry objects (either IndexEntry</span>
<span class="sd">            or UrlsetEntry depending on the sitemap type)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the type of sitemap document.</span>

<span class="sd">        Determines the type based on the root element&#39;s local name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            String indicating the sitemap type:</span>
<span class="sd">            - &#39;sitemapindex&#39;: A sitemap index containing references to other sitemaps</span>
<span class="sd">            - &#39;urlset&#39;: A sitemap containing page URLs</span>
<span class="sd">            - &#39;unsupported&#39;: Any other type of document</span>

<span class="sd">        Raises:</span>
<span class="sd">            SitemapError: If no document has been loaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_root&quot;</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="n">SitemapError</span><span class="p">(</span><span class="s2">&quot;No root name&quot;</span><span class="p">)</span>

        <span class="n">localname</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">QName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">localname</span>
        <span class="k">if</span> <span class="n">localname</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SITEMAPINDEX</span><span class="p">,</span> <span class="n">URLSET</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified sitemap type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">localname</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">localname</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unsupported sitemap document type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">localname</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;unsupported&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.SitemapDocument.entries" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entries</span><span class="p">:</span> <span class="n">ResourceList</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the list of entries extracted from the sitemap.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList containing SitemapEntry objects (either IndexEntry</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or UrlsetEntry depending on the sitemap type)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.SitemapDocument.type" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the type of sitemap document.</p>
<p>Determines the type based on the root element's local name.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String indicating the sitemap type:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'sitemapindex': A sitemap index containing references to other sitemaps</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'urlset': A sitemap containing page URLs</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'unsupported': Any other type of document</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.error.SitemapError">SitemapError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no document has been loaded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.SitemapParser" class="doc doc-heading">
            <code>SitemapParser</code>


</h3>


    <div class="doc doc-contents ">


        <p>Recursive parser for extracting URLs from sitemap documents.</p>
<p>This class handles the traversal of sitemap structures, including nested
sitemap indexes, to extract all page URLs. It implements:</p>
<ul>
<li>Recursive traversal of sitemap indexes</li>
<li>Depth limiting to prevent excessive recursion</li>
<li>Cycle detection to prevent infinite loops</li>
<li>URL deduplication</li>
<li>Multiple input formats (IndexDocument, ResourceList, etc.)</li>
</ul>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.SitemapParser.context">context</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context with client for fetching sitemaps and logging</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.context import Context
from ethicrawl.core import Resource, Url
from ethicrawl.sitemaps import SitemapParser
context = Context(Resource(Url("https://example.com")))
parser = SitemapParser(context)</p>
<h4 id="ethicrawl.sitemaps.SitemapParser--parse-from-a-single-sitemap-url">Parse from a single sitemap URL</h4>
<p>urls = parser.parse([Resource(Url("https://example.com/sitemap.xml"))])
print(f"Found {len(urls)} URLs in sitemap")</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/sitemap_parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SitemapParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursive parser for extracting URLs from sitemap documents.</span>

<span class="sd">    This class handles the traversal of sitemap structures, including nested</span>
<span class="sd">    sitemap indexes, to extract all page URLs. It implements:</span>

<span class="sd">    - Recursive traversal of sitemap indexes</span>
<span class="sd">    - Depth limiting to prevent excessive recursion</span>
<span class="sd">    - Cycle detection to prevent infinite loops</span>
<span class="sd">    - URL deduplication</span>
<span class="sd">    - Multiple input formats (IndexDocument, ResourceList, etc.)</span>

<span class="sd">    Attributes:</span>
<span class="sd">        context: Context with client for fetching sitemaps and logging</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.context import Context</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Resource, Url</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import SitemapParser</span>
<span class="sd">        &gt;&gt;&gt; context = Context(Resource(Url(&quot;https://example.com&quot;)))</span>
<span class="sd">        &gt;&gt;&gt; parser = SitemapParser(context)</span>
<span class="sd">        &gt;&gt;&gt; # Parse from a single sitemap URL</span>
<span class="sd">        &gt;&gt;&gt; urls = parser.parse([Resource(Url(&quot;https://example.com/sitemap.xml&quot;))])</span>
<span class="sd">        &gt;&gt;&gt; print(f&quot;Found {len(urls)} URLs in sitemap&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the sitemap parser.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: Context with client for fetching sitemaps and logging</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">logger</span><span class="p">(</span><span class="s2">&quot;sitemap&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root</span><span class="p">:</span> <span class="n">IndexDocument</span> <span class="o">|</span> <span class="n">ResourceList</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Resource</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse sitemap(s) and extract all contained URLs.</span>

<span class="sd">        This is the main entry point for sitemap parsing. It accepts various</span>
<span class="sd">        input formats and recursively extracts all URLs from the sitemap(s).</span>

<span class="sd">        Args:</span>
<span class="sd">            root: Source to parse, which can be:</span>
<span class="sd">                - IndexDocument: Pre-parsed sitemap index</span>
<span class="sd">                - ResourceList: List of resources to fetch as sitemaps</span>
<span class="sd">                - list[Resource]: List of resources to fetch as sitemaps</span>
<span class="sd">                - None: Use the context&#39;s base URL for robots.txt discovery</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList containing all page URLs found in the sitemap(s)</span>

<span class="sd">        Raises:</span>
<span class="sd">            SitemapError: If a sitemap cannot be fetched or parsed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting sitemap parsing&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">IndexDocument</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Parsing from provided IndexDocument&quot;</span><span class="p">)</span>
            <span class="n">document</span> <span class="o">=</span> <span class="n">root</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Handle different input types properly</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">ResourceList</span><span class="p">):</span>
                <span class="c1"># Already a ResourceList, use directly</span>
                <span class="n">resources</span> <span class="o">=</span> <span class="n">root</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Convert other list-like objects or None</span>
                <span class="n">resources</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">(</span><span class="n">root</span> <span class="ow">or</span> <span class="p">[])</span>

            <span class="n">document</span> <span class="o">=</span> <span class="n">IndexDocument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
                <span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IndexEntry</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traverse</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">IndexDocument</span> <span class="o">|</span> <span class="n">SitemapDocument</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch and parse a sitemap document from a resource.</span>

<span class="sd">        Retrieves the resource using the context&#39;s client and attempts</span>
<span class="sd">        to parse it as a sitemap document, determining the correct type</span>
<span class="sd">        (index or urlset).</span>

<span class="sd">        Args:</span>
<span class="sd">            resource: Resource to fetch and parse</span>

<span class="sd">        Returns:</span>
<span class="sd">            Parsed sitemap document (either IndexDocument or UrlsetDocument)</span>

<span class="sd">        Raises:</span>
<span class="sd">            SitemapError: If the document cannot be fetched or parsed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">Client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Fetching sitemap from </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>

        <span class="c1"># Handle different response types</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using text attribute from response&quot;</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>  <span class="c1"># pyright: ignore[reportAttributeAccessIssue]</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using string content attribute from response&quot;</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">):</span>
            <span class="c1"># Content attribute that needs decoding</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fallback - convert response to string</span>
            <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="n">document</span> <span class="o">=</span> <span class="n">SitemapDocument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">document</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">URLSET</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UrlsetDocument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">document</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SITEMAPINDEX</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">IndexDocument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Unknown sitemap type with root element: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">type</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">SitemapError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown sitemap type with root element: </span><span class="si">{</span><span class="n">document</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_traverse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="n">IndexDocument</span> <span class="o">|</span> <span class="n">SitemapDocument</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">visited</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Recursively traverse a sitemap document and extract URLs.</span>

<span class="sd">        Handles depth limiting and crawls nested sitemaps up to the</span>
<span class="sd">        configured maximum depth.</span>

<span class="sd">        Args:</span>
<span class="sd">            document: Sitemap document to traverse</span>
<span class="sd">            depth: Current recursion depth</span>
<span class="sd">            visited: Set of already processed sitemap URLs to prevent cycles</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList containing all URLs found in the traverse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Collection of all found URLs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">IndexDocument</span><span class="p">):</span>  <span class="c1"># we shouldn&#39;t be here</span>
            <span class="k">return</span> <span class="n">ResourceList</span><span class="p">()</span>
        <span class="n">max_depth</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span><span class="o">.</span><span class="n">sitemap</span><span class="o">.</span><span class="n">max_depth</span>
        <span class="n">all_urls</span><span class="p">:</span> <span class="n">ResourceList</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">([])</span>

        <span class="c1"># Initialize visited set if this is the first call</span>
        <span class="k">if</span> <span class="n">visited</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># Check if we&#39;ve reached maximum depth</span>
        <span class="k">if</span> <span class="n">depth</span> <span class="o">&gt;=</span> <span class="n">max_depth</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Maximum recursion depth (</span><span class="si">%d</span><span class="s2">) reached, stopping traversal&quot;</span><span class="p">,</span> <span class="n">max_depth</span>
            <span class="p">)</span>
            <span class="c1"># Return empty ResourceList instead of None</span>
            <span class="k">return</span> <span class="n">ResourceList</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Traversing IndexDocument at depth </span><span class="si">%d</span><span class="s2">, has </span><span class="si">%d</span><span class="s2"> items&quot;</span><span class="p">,</span>
            <span class="n">depth</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
            <span class="c1"># Process each entry and collect any URLs found</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_entry</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
            <span class="n">all_urls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">all_urls</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_entry</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">IndexEntry</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">visited</span><span class="p">:</span> <span class="nb">set</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a single sitemap entry, handling cycles and recursion.</span>

<span class="sd">        Args:</span>
<span class="sd">            item: Sitemap entry to process</span>
<span class="sd">            depth: Current recursion depth</span>
<span class="sd">            visited: Set of already processed sitemap URLs</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList of URLs found in this entry (and any nested entries)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

        <span class="c1"># Check for cycles - skip if we&#39;ve seen this URL before</span>
        <span class="k">if</span> <span class="n">url_str</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Cycle detected: </span><span class="si">%s</span><span class="s2"> has already been processed&quot;</span><span class="p">,</span> <span class="n">url_str</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">ResourceList</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Processing item: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="n">document</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">Resource</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>

        <span class="c1"># Mark this URL as visited</span>
        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">document</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SITEMAPINDEX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Found index sitemap with </span><span class="si">%d</span><span class="s2"> items&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traverse</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">document</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">URLSET</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found urlset with </span><span class="si">%d</span><span class="s2"> URLs&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">document</span><span class="o">.</span><span class="n">entries</span>

        <span class="c1"># Empty list for any unhandled cases</span>
        <span class="k">return</span> <span class="n">ResourceList</span><span class="p">()</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="ethicrawl.sitemaps.SitemapParser.parse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">IndexDocument</span> <span class="o">|</span> <span class="n">ResourceList</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Resource</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Parse sitemap(s) and extract all contained URLs.</p>
<p>This is the main entry point for sitemap parsing. It accepts various
input formats and recursively extracts all URLs from the sitemap(s).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>root</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="IndexDocument (ethicrawl.sitemaps.index_document.IndexDocument)" href="#ethicrawl.sitemaps.IndexDocument">IndexDocument</a> | <span title="ethicrawl.core.ResourceList">ResourceList</span> | <span title="list">list</span>[<span title="ethicrawl.core.Resource">Resource</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source to parse, which can be:
- IndexDocument: Pre-parsed sitemap index
- ResourceList: List of resources to fetch as sitemaps
- list[Resource]: List of resources to fetch as sitemaps
- None: Use the context's base URL for robots.txt discovery</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList containing all page URLs found in the sitemap(s)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.error.SitemapError">SitemapError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a sitemap cannot be fetched or parsed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ethicrawl/sitemaps/sitemap_parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root</span><span class="p">:</span> <span class="n">IndexDocument</span> <span class="o">|</span> <span class="n">ResourceList</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Resource</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse sitemap(s) and extract all contained URLs.</span>

<span class="sd">    This is the main entry point for sitemap parsing. It accepts various</span>
<span class="sd">    input formats and recursively extracts all URLs from the sitemap(s).</span>

<span class="sd">    Args:</span>
<span class="sd">        root: Source to parse, which can be:</span>
<span class="sd">            - IndexDocument: Pre-parsed sitemap index</span>
<span class="sd">            - ResourceList: List of resources to fetch as sitemaps</span>
<span class="sd">            - list[Resource]: List of resources to fetch as sitemaps</span>
<span class="sd">            - None: Use the context&#39;s base URL for robots.txt discovery</span>

<span class="sd">    Returns:</span>
<span class="sd">        ResourceList containing all page URLs found in the sitemap(s)</span>

<span class="sd">    Raises:</span>
<span class="sd">        SitemapError: If a sitemap cannot be fetched or parsed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting sitemap parsing&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">IndexDocument</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Parsing from provided IndexDocument&quot;</span><span class="p">)</span>
        <span class="n">document</span> <span class="o">=</span> <span class="n">root</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Handle different input types properly</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">ResourceList</span><span class="p">):</span>
            <span class="c1"># Already a ResourceList, use directly</span>
            <span class="n">resources</span> <span class="o">=</span> <span class="n">root</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Convert other list-like objects or None</span>
            <span class="n">resources</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">(</span><span class="n">root</span> <span class="ow">or</span> <span class="p">[])</span>

        <span class="n">document</span> <span class="o">=</span> <span class="n">IndexDocument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
            <span class="n">document</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IndexEntry</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_traverse</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.UrlsetEntry" class="doc doc-heading">
            <code>UrlsetEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SitemapEntry


  
      dataclass
   (ethicrawl.sitemaps.sitemap_entry.SitemapEntry)" href="#ethicrawl.sitemaps.SitemapEntry">SitemapEntry</a></code></p>


        <p>Represents an entry in a sitemap urlset file.</p>
<p>UrlsetEntry specializes SitemapEntry for standard sitemap URL entries
that contain page URLs with metadata. These entries represent actual
content pages on a website, as opposed to index entries that point
to other sitemap files.</p>
<p>In addition to the URL and lastmod attributes inherited from SitemapEntry,
UrlsetEntry adds support for:
- changefreq: How frequently the page is likely to change
- priority: Relative importance of this URL (0.0-1.0)</p>
<p>All attributes are validated during initialization to ensure they
conform to the sitemap protocol specification.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.UrlsetEntry.url">url</span></code></td>
            <td>
                  <code><span title="ethicrawl.core.url.Url">Url</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL of the page (inherited from Resource)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.UrlsetEntry.lastmod">lastmod</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last modification date (inherited from SitemapEntry)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.UrlsetEntry.changefreq">changefreq</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Update frequency (always, hourly, daily, weekly, etc.)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="ethicrawl.sitemaps.UrlsetEntry.priority">priority</span></code></td>
            <td>
                  <code><span title="float">float</span> | <span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relative importance value from 0.0 to 1.0</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.core import Url
from ethicrawl.sitemaps import UrlsetEntry
entry = UrlsetEntry(
...     Url("https://example.com/page1"),
...     lastmod="2023-06-15T14:30:00Z",
...     changefreq="weekly",
...     priority=0.8
... )
str(entry)
'https://example.com/page1 | last modified: 2023-06-15T14:30:00Z | frequency: weekly | priority: 0.8'</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/urlset_entry.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UrlsetEntry</span><span class="p">(</span><span class="n">SitemapEntry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an entry in a sitemap urlset file.</span>

<span class="sd">    UrlsetEntry specializes SitemapEntry for standard sitemap URL entries</span>
<span class="sd">    that contain page URLs with metadata. These entries represent actual</span>
<span class="sd">    content pages on a website, as opposed to index entries that point</span>
<span class="sd">    to other sitemap files.</span>

<span class="sd">    In addition to the URL and lastmod attributes inherited from SitemapEntry,</span>
<span class="sd">    UrlsetEntry adds support for:</span>
<span class="sd">    - changefreq: How frequently the page is likely to change</span>
<span class="sd">    - priority: Relative importance of this URL (0.0-1.0)</span>

<span class="sd">    All attributes are validated during initialization to ensure they</span>
<span class="sd">    conform to the sitemap protocol specification.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url: URL of the page (inherited from Resource)</span>
<span class="sd">        lastmod: Last modification date (inherited from SitemapEntry)</span>
<span class="sd">        changefreq: Update frequency (always, hourly, daily, weekly, etc.)</span>
<span class="sd">        priority: Relative importance value from 0.0 to 1.0</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Url</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import UrlsetEntry</span>
<span class="sd">        &gt;&gt;&gt; entry = UrlsetEntry(</span>
<span class="sd">        ...     Url(&quot;https://example.com/page1&quot;),</span>
<span class="sd">        ...     lastmod=&quot;2023-06-15T14:30:00Z&quot;,</span>
<span class="sd">        ...     changefreq=&quot;weekly&quot;,</span>
<span class="sd">        ...     priority=0.8</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; str(entry)</span>
<span class="sd">        &#39;https://example.com/page1 | last modified: 2023-06-15T14:30:00Z | frequency: weekly | priority: 0.8&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">changefreq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_valid_change_freqs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;always&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hourly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;daily&quot;</span><span class="p">,</span>
        <span class="s2">&quot;weekly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;monthly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yearly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;never&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_priority</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and convert priority value.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Priority value as string or float</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Normalized priority value</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If priority is not between 0.0 and 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Convert string to float if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Priority must be a number, got &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

        <span class="c1"># Always convert to float (handles integers)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Validate range</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Priority must be between 0.0 and 1.0, got </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_changefreq</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and normalize change frequency value.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Change frequency string or None</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Normalized change frequency (lowercase, stripped) or None</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If changefreq is not a string</span>
<span class="sd">            ValueError: If changefreq is not one of the valid values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;changefreq must be a string, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Normalize: strip and lowercase</span>
        <span class="n">normalized</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># Validate against valid frequencies</span>
        <span class="n">valid_freqs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;always&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hourly&quot;</span><span class="p">,</span>
            <span class="s2">&quot;daily&quot;</span><span class="p">,</span>
            <span class="s2">&quot;weekly&quot;</span><span class="p">,</span>
            <span class="s2">&quot;monthly&quot;</span><span class="p">,</span>
            <span class="s2">&quot;yearly&quot;</span><span class="p">,</span>
            <span class="s2">&quot;never&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">normalized</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_freqs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid change frequency: &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39;. Must be one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">valid_freqs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">normalized</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate fields after initialization.</span>

<span class="sd">        Calls the parent class validation, then validates and normalizes</span>
<span class="sd">        the changefreq and priority attributes if they are provided.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If any field contains invalid values</span>
<span class="sd">            TypeError: If any field has an incorrect type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>  <span class="c1"># Call parent&#39;s validation</span>

        <span class="c1"># Validate changefreq</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_changefreq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span><span class="p">)</span>

        <span class="c1"># Validate priority</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_priority</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Human-readable string representation.</span>

<span class="sd">        Creates a pipe-separated string containing the URL and any available</span>
<span class="sd">        metadata (lastmod, changefreq, priority).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Formatted string with URL and metadata</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;last modified: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;frequency: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;priority: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">priority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detailed representation for debugging.</span>

<span class="sd">        Returns:</span>
<span class="sd">            String representation showing class name and all field values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;SitemapUrlsetEntry(url=&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;, lastmod=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span><span class="p">)</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;changefreq=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changefreq</span><span class="p">)</span><span class="si">}</span><span class="s2">, priority=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ethicrawl.sitemaps.UrlsetDocument" class="doc doc-heading">
            <code>UrlsetDocument</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SitemapDocument (ethicrawl.sitemaps.sitemap_document.SitemapDocument)" href="#ethicrawl.sitemaps.SitemapDocument">SitemapDocument</a></code></p>


        <p>Specialized parser for sitemap urlset documents.</p>
<p>This class extends SitemapDocument to handle urlset sitemaps,
which contain page URLs with metadata like change frequency and priority.
It validates that the document is a proper urlset and extracts all
URL references as UrlsetEntry objects.</p>
<p>UrlsetDocument supports only the core sitemap protocol specification
elements (loc, lastmod, changefreq, priority) and does not handle any
sitemap protocol extensions.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="entries: ResourceList

  
      property
      writable
   (ethicrawl.sitemaps.UrlsetDocument.entries)" href="#ethicrawl.sitemaps.UrlsetDocument.entries">entries</a></code></td>
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList of UrlsetEntry objects representing page URLs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from ethicrawl.context import Context
from ethicrawl.core import Resource
from ethicrawl.sitemaps import UrlsetDocument
context = Context(Resource("https://example.com"))
sitemap_xml = '''&lt;?xml version="1.0" encoding="UTF-8"?&gt;
... <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
...   <url>
...     <loc>https://example.com/page1</loc>
...     <lastmod>2023-06-15T14:30:00Z</lastmod>
...     <changefreq>weekly</changefreq>
...     <priority>0.8</priority>
...   </url>
... </urlset>'''
urlset = UrlsetDocument(context, sitemap_xml)
len(urlset.entries)
1
entry = urlset.entries[0]
entry.priority
'0.8'</p>
</blockquote>
</blockquote>
</blockquote>
</details>






              <details class="quote">
                <summary>Source code in <code>ethicrawl/sitemaps/urlset_document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UrlsetDocument</span><span class="p">(</span><span class="n">SitemapDocument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specialized parser for sitemap urlset documents.</span>

<span class="sd">    This class extends SitemapDocument to handle urlset sitemaps,</span>
<span class="sd">    which contain page URLs with metadata like change frequency and priority.</span>
<span class="sd">    It validates that the document is a proper urlset and extracts all</span>
<span class="sd">    URL references as UrlsetEntry objects.</span>

<span class="sd">    UrlsetDocument supports only the core sitemap protocol specification</span>
<span class="sd">    elements (loc, lastmod, changefreq, priority) and does not handle any</span>
<span class="sd">    sitemap protocol extensions.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        entries: ResourceList of UrlsetEntry objects representing page URLs</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.context import Context</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.core import Resource</span>
<span class="sd">        &gt;&gt;&gt; from ethicrawl.sitemaps import UrlsetDocument</span>
<span class="sd">        &gt;&gt;&gt; context = Context(Resource(&quot;https://example.com&quot;))</span>
<span class="sd">        &gt;&gt;&gt; sitemap_xml = &#39;&#39;&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="sd">        ... &lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;</span>
<span class="sd">        ...   &lt;url&gt;</span>
<span class="sd">        ...     &lt;loc&gt;https://example.com/page1&lt;/loc&gt;</span>
<span class="sd">        ...     &lt;lastmod&gt;2023-06-15T14:30:00Z&lt;/lastmod&gt;</span>
<span class="sd">        ...     &lt;changefreq&gt;weekly&lt;/changefreq&gt;</span>
<span class="sd">        ...     &lt;priority&gt;0.8&lt;/priority&gt;</span>
<span class="sd">        ...   &lt;/url&gt;</span>
<span class="sd">        ... &lt;/urlset&gt;&#39;&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; urlset = UrlsetDocument(context, sitemap_xml)</span>
<span class="sd">        &gt;&gt;&gt; len(urlset.entries)</span>
<span class="sd">        1</span>
<span class="sd">        &gt;&gt;&gt; entry = urlset.entries[0]</span>
<span class="sd">        &gt;&gt;&gt; entry.priority</span>
<span class="sd">        &#39;0.8&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a urlset sitemap document parser.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: Context for logging and resource resolution</span>
<span class="sd">            document: Optional XML urlset content to parse</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the document is not a valid urlset</span>
<span class="sd">            SitemapError: If the document cannot be parsed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating UrlsetDocument instance&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">document</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_localname</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">QName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">localname</span>
            <span class="k">if</span> <span class="n">_localname</span> <span class="o">!=</span> <span class="n">URLSET</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a root </span><span class="si">{</span><span class="n">URLSET</span><span class="si">}</span><span class="s2"> got </span><span class="si">{</span><span class="n">_localname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_urlset_sitemap</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Parsed urlset with </span><span class="si">%d</span><span class="s2"> entries&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_urlset_sitemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse page URLs from a urlset sitemap.</span>

<span class="sd">        Extracts all &lt;url&gt; elements and their children (&lt;loc&gt;, &lt;lastmod&gt;,</span>
<span class="sd">        &lt;changefreq&gt;, &lt;priority&gt;), creating UrlsetEntry objects for each</span>
<span class="sd">        valid URL entry.</span>

<span class="sd">        Args:</span>
<span class="sd">            document: XML document string to parse</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList containing UrlsetEntry objects for each URL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">urlset</span><span class="p">:</span> <span class="n">ResourceList</span> <span class="o">=</span> <span class="n">ResourceList</span><span class="p">()</span>

        <span class="n">nsmap</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SITEMAP_NS</span><span class="p">}</span>
        <span class="n">_root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">parser</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>

        <span class="c1"># Find all url elements</span>
        <span class="n">url_elements</span> <span class="o">=</span> <span class="n">_root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;.//url&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found </span><span class="si">%d</span><span class="s2"> URL entries in urlset&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">url_elements</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">url_elem</span> <span class="ow">in</span> <span class="n">url_elements</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">loc_elem</span> <span class="o">=</span> <span class="n">url_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">loc_elem</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">loc_elem</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># Get optional elements</span>
                <span class="n">lastmod_elem</span> <span class="o">=</span> <span class="n">url_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;lastmod&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
                <span class="n">changefreq_elem</span> <span class="o">=</span> <span class="n">url_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;changefreq&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>
                <span class="n">priority_elem</span> <span class="o">=</span> <span class="n">url_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">nsmap</span><span class="p">)</span>

                <span class="n">url</span> <span class="o">=</span> <span class="n">UrlsetEntry</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">Url</span><span class="p">(</span><span class="n">loc_elem</span><span class="o">.</span><span class="n">text</span><span class="p">),</span>
                    <span class="n">lastmod</span><span class="o">=</span><span class="n">lastmod_elem</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">lastmod_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">changefreq</span><span class="o">=</span><span class="p">(</span>
                        <span class="n">changefreq_elem</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">changefreq_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
                    <span class="p">),</span>
                    <span class="n">priority</span><span class="o">=</span><span class="p">(</span>
                        <span class="n">priority_elem</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">priority_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
                    <span class="p">),</span>
                <span class="p">)</span>

                <span class="n">urlset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error parsing sitemap reference: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">urlset</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResourceList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the URLs in this urlset.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResourceList of UrlsetEntry objects representing page URLs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span>

    <span class="nd">@entries</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">:</span> <span class="n">ResourceList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the URLs in this urlset.</span>

<span class="sd">        Args:</span>
<span class="sd">            entries: List of page URLs as UrlsetEntry objects</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If entries is not a ResourceList or contains non-UrlsetEntry objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">ResourceList</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;entries must be a ResourceList&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">UrlsetEntry</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;entries must contain only UrlsetEntry objects&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="n">entries</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.UrlsetDocument.type" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the type of sitemap document.</p>
<p>Determines the type based on the root element's local name.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String indicating the sitemap type:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'sitemapindex': A sitemap index containing references to other sitemaps</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'urlset': A sitemap containing page URLs</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>'unsupported': Any other type of document</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.error.SitemapError">SitemapError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no document has been loaded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ethicrawl.sitemaps.UrlsetDocument.entries" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entries</span><span class="p">:</span> <span class="n">ResourceList</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the URLs in this urlset.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ethicrawl.core.ResourceList">ResourceList</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ResourceList of UrlsetEntry objects representing page URLs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "content.code.annotate", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>